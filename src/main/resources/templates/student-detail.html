<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Details</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" th:href="@{/css/theme.css}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px 0;
        }
        .detail-card {
            border-radius: 15px;
            border: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .profile-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px 15px 0 0;
        }
        .avatar-large {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border: 4px solid white;
        }
        .info-item {
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
        }
        .info-item:last-child {
            border-bottom: none;
        }
        .info-label {
            font-weight: 600;
            color: #6c757d;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .info-value {
            font-size: 1.1em;
            color: #212529;
            margin-top: 5px;
        }
        .badge-gpa-large {
            font-size: 1.2em;
            padding: 10px 20px;
        }
        .gpa-excellent { background-color: #28a745; }
        .gpa-good { background-color: #17a2b8; }
        .gpa-average { background-color: #ffc107; color: #212529; }
        .gpa-poor { background-color: #dc3545; }
    </style>
</head>
<body class="app-shell">
    <div th:replace="fragments/header :: header"></div>

    <main class="main-content container" role="main" aria-label="Student details">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card detail-card">
                <!-- Profile Header -->
                <div class="profile-header">
                    <div class="d-flex align-items-center">
                        <div class="avatar-large me-4">
                            <i class="bi bi-person-fill"></i>
                        </div>
                        <div class="flex-grow-1">
                            <h2 class="mb-1" th:text="${student.name}" id="studentName">Student Name</h2>
                            <p class="mb-2 opacity-75" aria-hidden="true">
                                <i class="bi bi-hash me-1"></i>
                                <span th:text="${student.studentId}">STU001</span>
                            </p>
                            <div class="d-flex align-items-center gap-3 mt-3">
                                <a th:href="@{'/edit/' + ${student.id}}" class="btn btn-light btn-sm">
                                    <i class="bi bi-pencil me-1"></i>Edit
                                </a>
                                          <a data-delete-url th:href="@{'/delete/' + ${student.id}}" 
                                              class="btn btn-outline-light btn-sm">
                                    <i class="bi bi-trash me-1"></i>Delete
                                </a>
                            </div>
                        </div>
                        <div class="text-end" th:if="${student.gpa != null}">
                            <div class="badge badge-gpa-large text-white mb-2"
                                 th:classappend="${student.gpa >= 3.5} ? 'gpa-excellent' : (${student.gpa >= 3.0} ? 'gpa-good' : (${student.gpa >= 2.0} ? 'gpa-average' : 'gpa-poor'))"
                                 th:text="${#numbers.formatDecimal(student.gpa, 1, 2) + ' GPA'}">4.0 GPA</div>
                        </div>
                    </div>
                </div>

                <!-- Student Details -->
                <div class="card-body p-0">
                    <div class="row g-0">
                        <!-- Left Column -->
                        <div class="col-md-6">
                            <div class="info-item">
                                <div class="info-label">
                                    <i class="bi bi-person me-1"></i>Full Name
                                </div>
                                <div class="info-value" th:text="${student.name}"></div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">
                                    <i class="bi bi-hash me-1"></i>Student ID
                                </div>
                                <div class="info-value">
                                    <span class="badge bg-primary" th:text="${student.studentId}"></span>
                                </div>
                            </div>

                            <div class="info-item">
                                <div class="info-label">
                                    <i class="bi bi-calendar me-1"></i>Age
                                </div>
                                <div class="info-value" th:text="${student.age + ' years old'}"></div>
                            </div>

                            <div class="info-item">
                                <div class="info-label">
                                    <i class="bi bi-gender-ambiguous me-1"></i>Gender
                                </div>
                                <div class="info-value" th:text="${student.gender}"></div>
                            </div>

                            <div class="info-item">
                                <div class="info-label">
                                    <i class="bi bi-calendar-check me-1"></i>Enrollment Date
                                </div>
                                <div class="info-value" 
                                     th:text="${student.enrollmentDate != null ? #temporals.format(student.enrollmentDate, 'MMMM dd, yyyy') : 'N/A'}"></div>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div class="col-md-6">
                            <div class="info-item">
                                <div class="info-label">
                                    <i class="bi bi-envelope me-1"></i>Email Address
                                </div>
                                <div class="info-value" th:if="${student.email != null}">
                                    <a th:href="'mailto:' + ${student.email}" th:text="${student.email}"></a>
                                </div>
                                <div class="info-value text-muted" th:if="${student.email == null}">N/A</div>
                            </div>

                            <div class="info-item">
                                <div class="info-label">
                                    <i class="bi bi-telephone me-1"></i>Phone Number
                                </div>
                                <div class="info-value" th:if="${student.phone != null}">
                                    <a th:href="'tel:' + ${student.phone}" th:text="${student.phone}"></a>
                                </div>
                                <div class="info-value text-muted" th:if="${student.phone == null}">N/A</div>
                            </div>

                            <div class="info-item">
                                <div class="info-label">
                                    <i class="bi bi-book me-1"></i>Course
                                </div>
                                <div class="info-value">
                                    <span class="badge bg-info" th:text="${student.course}"></span>
                                </div>
                            </div>

                            <div class="info-item">
                                <div class="info-label">
                                    <i class="bi bi-building me-1"></i>Department
                                </div>
                                <div class="info-value">
                                    <span class="badge bg-secondary" th:text="${student.department}"></span>
                                </div>
                            </div>

                            <div class="info-item">
                                <div class="info-label">
                                    <i class="bi bi-star-fill me-1"></i>GPA (Grade Point Average)
                                </div>
                                <div class="info-value" th:if="${student.gpa != null}">
                                    <span class="badge badge-gpa-large text-white"
                                          th:classappend="${student.gpa >= 3.5} ? 'gpa-excellent' : (${student.gpa >= 3.0} ? 'gpa-good' : (${student.gpa >= 2.0} ? 'gpa-average' : 'gpa-poor'))"
                                          th:text="${#numbers.formatDecimal(student.gpa, 1, 2)}"></span>
                                    <small class="text-muted ms-2" th:if="${student.gpa >= 3.5}">(Excellent)</small>
                                    <small class="text-muted ms-2" th:if="${student.gpa >= 3.0 && student.gpa < 3.5}">(Good)</small>
                                    <small class="text-muted ms-2" th:if="${student.gpa >= 2.0 && student.gpa < 3.0}">(Average)</small>
                                    <small class="text-muted ms-2" th:if="${student.gpa < 2.0}">(Needs Improvement)</small>
                                </div>
                                <div class="info-value text-muted" th:if="${student.gpa == null}">N/A</div>
                            </div>
                        </div>
                    </div>

                    <!-- Address Section (Full Width) -->
                    <div class="border-top">
                        <div class="info-item">
                            <div class="info-label">
                                <i class="bi bi-geo-alt me-1"></i>Address
                            </div>
                            <div class="info-value mt-2" th:text="${student.address}"></div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="card-footer bg-white border-0 p-4">
                    <div class="d-flex justify-content-between">
                        <a href="/" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-left me-1"></i>Back to List
                        </a>
                        <div>
                            <a th:href="@{'/edit/' + ${student.id}}" class="btn btn-primary me-2">
                                <i class="bi bi-pencil me-1"></i>Edit Student
                            </a>
                            <a th:href="@{'/delete/' + ${student.id}}" 
                               class="btn btn-danger"
                               onclick="return confirm('Are you sure you want to delete this student?');">
                                <i class="bi bi-trash me-1"></i>Delete Student
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    </main>

    <div th:replace="fragments/footer :: footer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script th:src="@{/js/app.js}"></script>
</body>
</html>

